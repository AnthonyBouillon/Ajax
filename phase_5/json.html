<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://stackpath.bootstrapcdn.com/bootswatch/4.3.1/cerulean/bootstrap.min.css" rel="stylesheet" integrity="sha384-C++cugH8+Uf86JbNOnQoBweHHAe/wVKN/mb0lTybu/NZ9sEYbd+BbbYtNpWYAsNP" crossorigin="anonymous">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
  <input type="text" id="search"><button id="btn1">Va chercher !</button>
  <div class="container">
    <div class="row" id="div1">

    </div>
</div>
</body>
<script src="https://code.jquery.com/jquery-3.3.1.js"></script>
<script src="https://momentjs.com/downloads/moment.js"></script>
<script>

$('#btn1').click(function(){
  // Je vide le résultat pour faire place au nouveaux
  $('#div1').empty();
  // Je récupère la saisie de l'input
  var string = $('#search').val();
  $.get({
      // URL où se trouve les données à récupérer
      url: "http://api.themoviedb.org/3/search/movie?api_key=f33cd318f5135dba306176c13104506a&query=" + string,
      // Type de données à récupérer
      dataType: "json",
      // Si la requête ajax fonctionne
      success: function (data) {
        for(let i = 0; i < data.results.length; i++ ){
          var  mydate = new Date(data.results[i].release_date);
          var date = moment(mydate).format("DD-MM-YYYY");
            $('#div1').append(
              "<div class='alert alert-dismissible alert-warning col-4'>" +
                "<b>TITRE DU FILM : </b>" +
                "<p>" + data.results[i].title + "</p>" +
                "<b>DATE DE SORTIE DU FILM : </b>" +
                "<p>" + date + "</p>" +
                "<br/><br/>" +
                "<img src='http://image.tmdb.org/t/p/w185" + data.results[i].poster_path + "' >" +
                "<hr/>" +
              "</div>"
            );
        };
      }
  });
});

</script>
</html>
